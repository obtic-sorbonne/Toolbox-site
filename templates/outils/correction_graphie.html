{% extends "index.html" %}
{% block header %} {{ super() }} {% endblock %}

{% block content %}
<div class="outil">
	<div class="fil"><a href="{{ url_for('outils_correction')}}"><< {{ _('Retour aux tâches') }}</a></div>

<h3>{{ _('Normalisation de graphie ancienne') }}</h3>

<p><em>NormaLisa</em> {{ _('est un outil à base de règles pour normaliser automatiquement la graphie de textes en français ancien') }}. {{ _('Ce script a été élaboré par') }} <a href="https://scholar.google.fr/citations?user=cHgIp_kAAAAJ&hl=fr" target="_blank">Marine Riguet</a> {{ _("à l'occasion d'une collaboration de plusieurs mois avec l'équipe d'ARTFL (Université de Chicago) au printemps 2018") }}.</p>

<p>{{ _("NormaLisa s'appuie sur plusieurs bases lexicales ouvertes, développées par l'ATILF") }} : <a href="https://repository.ortolang.fr/api/content/morphalou/2/LISEZ_MOI.html" target="_blank">Morphalou</a>, {{ _('lexique ouvert de formes fléchies du français, et') }} <a href="http://stella.atilf.fr/LGeRM/" target="_blank">LGeRM</a>, {{ _('lexique morphologique répertoriant les flexions et variations orthographiques du moyen-français et du français des XVIe-XVIIe siècles') }}.</p>

<p><br/>{{ _('Une version beta est disponible sur Git, sous forme de script Python') }} : <a href="https://github.com/ljpetkovic/Normalisa/tree/dev" target="_blank"><em>NormaLisa (beta)</em></a></p>

<br>
      <p style="text-align: center;padding:20px"><a href="{{ url_for('documentation_correction') }}"  target="_blank">{{ _('Voir la documentation') }}</a></p>
      <div class="infos_outil" style="display: block;margin: 0 auto 15px auto;">
        <input id="show" type=checkbox><label for="show" class="infos_title"><i class="fa-solid fa-circle-info"></i> {{ _("Informations sur l'outil") }}<i class="fa-solid fa-angle-right" style="float:right;margin-top:5px;margin-left:15px;cursor: pointer;"></i></label>
        <div class="info_popped">
          <p>Normalisa
      <p>{{ _("Formats d'entrée :")}} <i class="fa-regular fa-file-lines"></i> {{ _('texte brut') }} (.txt)</p>
      <p>{{ _('Encodage') }} : UTF-8</p>
      </div>
    </div>

<form action="{{ url_for('normalisation_graphies') }}" id="normaform"  method="post" enctype="multipart/form-data" onsubmit="showloader('loader')">
        {{ form.csrf_token }}
        <div class="dropzone" style="margin:25px auto;">
            <input type="file" id="files" name="files" accept="text/plain" multiple required>
            <p id="form_msg">{{ _("Déposer le(s) fichier(s) ou cliquer ici")  }}.</p>
        </div>
        <input id="csrf_token" name="csrf_token" type="hidden" value="{{ csrf_token() }}">
        <button style="display:block;margin:auto;margin-top:20px;">{{ _('Corriger') }}</button>
</form>
{% if msg != "" %}
    <div> <p>{{ msg }}</p></div>
    {% endif %}
    <div class="loader" id="loader">
        <div class="loadingio-spinner-ball-205vl2x7f7n"><div class="ldio-b8p5li8dt1u"><div></div></div></div>
        <p>Traitement en cours...</p>
    </div>
    <script>
/* MAJ de la zone de glisser-déposer */ 
$('form input').change(function () {
    var nb_files = this.files.length;
    $('form #form_msg').text(nb_files + " fichier(s) selectionné(s)");

    /* Prévisualisation des fichiers chargés (max 3 visibles) */
    if(nb_files > 3){
        var num = nb_files - 3;
        for(i=0; i < 3; i++){
            $("#form_msg").append('<br/><span class="filename_preview">' + this.files[i].name + '</span>');
        }
        $("#form_msg").append('<span class="filename_preview"> et ' + num + ' autres.</span>');
    }
    else{
        for(i=0; i < nb_files; i++){
            $("#form_msg").append('<br/><span class="filename_preview">' + this.files[i].name + '</span>');
        }
    }
});
</script>
</div>
{% endblock %}
{% block footer %} {{ super() }} {% endblock %}